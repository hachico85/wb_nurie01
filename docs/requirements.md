# 塗り絵WEBアプリ 要件定義

## 目的/概要
- 目的: ブラウザ上でマウス操作（PC）またはタッチ操作（モバイル）により直感的に塗り絵ができる。
- 特徴: 線画は常に最上位レイヤー、色は線画の下に塗られる。消しゴムで塗りだけを消せる。

## 対象/前提
- 利用環境: PCブラウザ（マウス操作）、iPad/iPhone（タッチ操作）対応。
- 画像アセット: `img/` 配下に配置。黒線のみ不透明、その他は完全透過の線画画像を使用（例: PNG）。

## レイヤー構成
- 塗りレイヤー: ユーザーが色を塗る描画面（下層）。
- 線画レイヤー: 提供イラストを表示する面（最上位、常に前面）。
- 前提条件: ユーザーの描画・消去は塗りレイヤーにのみ影響し、線画は変化しない。

## 機能要件
- 色選択: 任意の色を選び、選択中の色で塗れること。
- 筆描画: マウス押下中（PC）またはタッチ中（モバイル）に連続して描画され、「ぐりぐり塗れる」塗り心地を実現。
- 消しゴム: ツール切替で塗りレイヤー上の色のみを消去。線画は消えない。
- 画像読み込み: `img/` から線画を読み込み、表示の解像度・サイズにフィット。

## 振る舞い詳細
- 連続描画: マウスダウン（PC）またはタッチスタート（モバイル）で描画開始、移動中は線分補間で連続塗り、マウスアップ・タッチエンドで終了。
- 重なり順: 常に「塗りレイヤー < 線画レイヤー」。塗りが線を覆っても線は前面に見える。
- 消去動作: 消しゴム時は塗りレイヤーのピクセルを透明化。線画は不変。
- キャンバス境界: 描画・消去はキャンバス内のみ有効。

## UI要件
- 基本UI: 色選択UI（カラーピッカーまたは定義パレット）とツール切替（筆/消しゴム）。
- 表示: 現在のツールと選択色が識別できる状態表示。
- リセット: 画面全体の塗りをクリアできる初期化操作（任意だが推奨）。

## 非機能/品質要件
- 描画体験: マウス追従（PC）・タッチ追従（モバイル）の遅延が目立たないスムーズな塗り心地。
- 画質: 拡大縮小時も線画は鮮明で、塗りと線のズレがない。
- 安定性: 線画の読み込み失敗時のエラーハンドリング（表示や再試行案内）。
- レスポンシブ対応: PC・iPad・iPhoneのそれぞれの画面サイズに適切に表示される。

## 検証条件（受け入れ基準）
- 前面保持: どの操作でも線画が常に最前面に表示される。
- 選色描画: 任意の色を選び、ドラッグ（PC）・タッチ&ドラッグ（モバイル）で連続塗りができる。
- 消し挙動: 消しゴムで塗りのみが消え、線画は一切変化しない。
- 画像差し替え: `img/` の別線画を選んでも同様に塗り・表示が機能する。
- デバイス対応: PC・iPad・iPhone各デバイスで正常に動作する。
